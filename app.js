function budgetService(e,t,n){var r=[],o=[],u=function(){return 0!=r.length?e.when(r):t.getAllBudgets().then(function(e){return r=e})},c=function(e){t.saveBudget(e).then(function(e){r.push(e)},function(e){console.log(e)})},i=function(e){t.getBudget(e).then(function(e){return e},function(e){return console.log(e),null})},s=function(){return 0!=o.length?e.when(o):t.getAllBudgetItems().then(function(e){return o=e})},a=function(e){t.saveBudgetItem(e).then(function(e){o.push(e)},function(e){console.log(e)})},l=function(e){return o.reduce(function(t,n){return n.budgetId==e.id?t+n.amount:t},0)},g=function(){var e=0;return angular.forEach(r,function(t){if("Fixed"==t.name||"Flex"==t.name){var n=l(t);e+=n}}),e},d=function(){return o.reduce(function(e,t){return e+t.amount},0)},f=function(e){return e.percentAllotment/100*n.total("net")},m=function(e){return l(e)/n.total("gross")*100},h=function(e){return f(e)-l(e)},v=function(){return r.reduce(function(e,t){return e+t.percentAllotment},0)},p=function(){var e=n.total("gross"),t=n.total("net");return(e-t)/e*100},y=function(){return r.reduce(function(e,t){return e+m(t)},p())};this.getAllBudgets=u,this.saveBudget=c,this.getBudget=i,this.getAllBudgetItems=s,this.saveBudgetItem=a,this.total=l,this.totalCore=g,this.totalAll=d,this.budgetCap=f,this.budgetUtilization=m,this.budgetBalance=h,this.guidelineTotal=v,this.taxUtilization=p,this.overviewUtilizationTotal=y}function deploydService(e,t,n){var r=function(){var r=t.defer();return e.get(n+"/budgets").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},o=function(r){var o=t.defer();return e.post(n+"/budgets",{name:r.name,percentAllotment:r.percent}).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},u=function(r){var o=t.defer();return e.get(n+"/budgets",{id:r}).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},c=function(){var r=t.defer();return e.get(n+"/budget-items").success(function(e){r.resolve(e)}).error(function(e){console.log(e)}),r.promise},i=function(r){var o=t.defer();return e.post(n+"/budget-items",{name:r.name,amount:r.amount,budgetId:r.budget.id}).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},s=function(){var r=t.defer();return e.get(n+"/income-sources").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},a=function(r){var o=t.defer();return e.post(n+"/income-sources",{job:r.job,incomeTypeId:r.incomeType.id,payrate:r.payrate,hours:r.hours,taxPercent:r.taxPercent}).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},l=function(){var r=t.defer();return e.get(n+"/income-types").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},g=function(r){var o=t.defer();return e.get(n+"/income-types?id="+r).success(function(e){o.resolve(type)}).error(function(e){console.log(e)}),o.promise};this.getAllBudgets=r,this.saveBudget=o,this.getAllBudgetItems=c,this.saveBudgetItem=i,this.getBudget=u,this.getAllIncomes=s,this.saveIncome=a,this.getAllIncomeTypes=l,this.getIncomeType=g}function normalizeIncomes(e){angular.isArray(e)||(e=[e]);var t=[];return angular.forEach(e,function(e){var n={};n.job=e.job,n.payrate=e.payrate,n.hours=e.hours,n.gross=e.payrate*e.hours*4,n.tax=e.taxPercent,n.net=n.gross*(1-e.taxPercent/100),n.biweekly=n.net/2,t.push(n)}),t}function getHours(e){switch(e){case"Weekly":case"Bi-Weekly":case"Yearly":return 40;case"Semi-Monthly":case"Monthly":return 520/12}}function incomeService(e,t){var n=[],r=[],o=function(){return 0!=n.length?e.when(n):t.getAllIncomes().then(function(e){return n=normalizeIncomes(e)})},u=function(e){t.saveIncome(e).then(function(e){n.push(self.normalizeIncomes(e)[0])},function(e){console.log(e)})},c=function(){return 0!=r?e.when(types):t.getAllIncomeTypes().then(function(e){return r=e})},i=function(e){return t.getType(e).then(function(e){return e})},s=function(e){return"tax"==e?s("gross")-s("net"):n.length>0&&isFinite(n[0][e])?n.reduce(function(t,n){return t+n[e]},0):void 0},a=function(e){return 13*e.gross},l=function(e){return 13*e.net},g=function(){return n.reduce(function(e,t){return e+a(t)},0)},d=function(){return n.reduce(function(e,t){return e+l(t)},0)},f=function(){return g()-d()},m=function(e,t,n){switch(n||(n=40),e.name){case"Weekly":return t/n;case"Bi-Weekly":return t/(2*n);case"Semi-Monthly":return t/(13*n/6);case"Monthly":return t/(13*n/3);case"Yearly":return t/(52*n)}};this.getAllIncomes=o,this.saveIncome=u,this.getAllIncomeTypes=c,this.getIncomeType=i,this.yearlyGross=a,this.totalYearlyGross=g,this.yearlyNet=l,this.totalYearlyNet=d,this.totalYearlyTax=f,this.total=s,this.calculatePayrate=m}function projectedBalanceService(e,t){var n=function(){return e.total("net")-t.totalAll()},r=function(e){return angular.isNumber(e)?t.totalCore()*e:t.totalCore()};this.getBalance=n,this.getCoreExpenses=r}angular.module("budgettingIsFun",["angular.filter"]).controller("BaseController",["$scope",function(e){e.welcomeMessage="Welcome Savy Budgetter"}]),angular.module("customFilters",[]).filter("unique",function(){return function(e,t){if(angular.isArray(e)&&angular.isString(t)){for(var n=[],r={},o=0;o<e.length;o++){var u=e[o][t];angular.isUndefined(r[u])&&(r[u]=!0,n.push(e[o]))}return console.log(n),n}return e}}),angular.module("budgettingIsFun").controller("BudgetController",["budgetService","incomeService",function(e,t){var n=this;n.budgets=[],n.budgetItems=[],e.getAllBudgets().then(function(t){n.budgets=t,e.getAllBudgetItems().then(function(e){n.budgetItems=e},function(e){console.log(e)})},function(e){console.log(e)}),n.newBudget={},n.saveBudget=function(t){e.saveBudget(t),n.newBudget={}},n.newBudgetItem={},n.saveBudgetItem=function(t){e.saveBudgetItem(t),n.newBudgetItem={}},n.budgetCap=e.budgetCap,n.budgetUtilization=e.budgetUtilization,n.budgetBalance=e.budgetBalance,n.guidelineTotal=e.guidelineTotal,n.taxUtilization=e.taxUtilization,n.overviewUtilizationTotal=e.overviewUtilizationTotal,n.total=e.total}]),angular.module("budgettingIsFun").service("budgetService",["$q","deploydService","incomeService",budgetService]),angular.module("budgettingIsFun").constant("deployd","http://localhost:2403").service("deploydService",["$http","$q","deployd",deploydService]),angular.module("budgettingIsFun").controller("IncomeController",["incomeService",function(e){var t=this;t.incomes=[],t.incomeTypes=[],e.getAllIncomes().then(function(e){t.incomes=e},function(e){console.log(e)}),e.getAllIncomeTypes().then(function(e){t.incomeTypes=e},function(e){console.log(e)}),t.newIncome={},t.saveIncome=function(n){e.saveIncome(n),t.newIncome={}},t.payInfo={},t.calculatedPayrate=0,t.calculatedHours=0,t.calculatePayrate=function(n){t.calculatedPayrate=e.calculatePayrate(n.incomeType,n.wage,n.hours),t.calculatedHours=n.hours?n.hours:40},t.totalYearlyGross=e.totalYearlyGross,t.totalYearlyNet=e.totalYearlyNet,t.totalYearlyTax=e.totalYearlyTax,t.total=e.total}]),angular.module("budgettingIsFun").service("incomeService",["$q","deploydService",incomeService]),angular.module("budgettingIsFun").controller("ProjectedBalanceController",["projectedBalanceService",function(e){var t=this;t.getBalance=e.getBalance,t.coreExpenses=e.getCoreExpenses}]),angular.module("budgettingIsFun").service("projectedBalanceService",["incomeService","budgetService",projectedBalanceService]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvYnVkZ2V0L2J1ZGdldFNlcnZpY2UuanMiLCJjb21wb25lbnRzL2RlcGxveWQvZGVwbG95ZFNlcnZpY2UuanMiLCJjb21wb25lbnRzL2luY29tZS9pbmNvbWVTZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9wcm9qZWN0ZWRCYWxhbmNlL3Byb2plY3RlZEJhbGFuY2VTZXJ2aWNlLmpzIiwiYXBwLm1vZHVsZS5qcyIsImZpbHRlcnMvY3VzdG9tRmlsdGVycy5qcyIsImNvbXBvbmVudHMvYnVkZ2V0L2J1ZGdldENvbnRyb2xsZXIuanMiLCJjb21wb25lbnRzL2luY29tZS9pbmNvbWVDb250cm9sbGVyLmpzIiwiY29tcG9uZW50cy9wcm9qZWN0ZWRCYWxhbmNlL3Byb2plY3RlZEJhbGFuY2VDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbImJ1ZGdldFNlcnZpY2UiLCIkcSIsImRlcGxveWRTZXJ2aWNlIiwiaW5jb21lU2VydmljZSIsImJ1ZGdldHMiLCJidWRnZXRJdGVtcyIsImdldEFsbEJ1ZGdldHMiLCJsZW5ndGgiLCJ3aGVuIiwidGhlbiIsImFsbEJ1ZGdldHMiLCJzYXZlQnVkZ2V0IiwibmV3QnVkZ2V0IiwicHVzaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJnZXRCdWRnZXQiLCJidWRnZXRJZCIsImJ1ZGdldCIsImdldEFsbEJ1ZGdldEl0ZW1zIiwiYWxsQnVkZ2V0SXRlbXMiLCJzYXZlQnVkZ2V0SXRlbSIsIm5ld0J1ZGdldEl0ZW0iLCJ0b3RhbCIsInJlZHVjZSIsInByZXYiLCJjdXJyIiwiaWQiLCJhbW91bnQiLCJ0b3RhbENvcmUiLCJhbmd1bGFyIiwiZm9yRWFjaCIsIm5hbWUiLCJ4IiwidG90YWxBbGwiLCJidWRnZXRDYXAiLCJwZXJjZW50QWxsb3RtZW50IiwiYnVkZ2V0VXRpbGl6YXRpb24iLCJidWRnZXRCYWxhbmNlIiwiZ3VpZGVsaW5lVG90YWwiLCJ0YXhVdGlsaXphdGlvbiIsImdyb3NzSW5jb21lIiwibmV0SW5jb21lIiwib3ZlcnZpZXdVdGlsaXphdGlvblRvdGFsIiwidGhpcyIsIiRodHRwIiwiZGVwbG95ZCIsImRlZmVycmVkIiwiZGVmZXIiLCJnZXQiLCJzdWNjZXNzIiwicmVzb2x2ZSIsImVycm9yIiwicmVqZWN0IiwicHJvbWlzZSIsInBvc3QiLCJwZXJjZW50IiwiaXRlbXMiLCJpbmNvbWVzIiwic2F2ZUluY29tZSIsIm5ld0luY29tZSIsImpvYiIsImluY29tZVR5cGVJZCIsImluY29tZVR5cGUiLCJwYXlyYXRlIiwiaG91cnMiLCJ0YXhQZXJjZW50IiwiaW5jb21lIiwiaW5jb21lVHlwZXMiLCJ0eXBlIiwiZ2V0QWxsSW5jb21lcyIsImdldEFsbEluY29tZVR5cGVzIiwiZ2V0SW5jb21lVHlwZSIsIm5vcm1hbGl6ZUluY29tZXMiLCJpc0FycmF5Iiwibm9ybWFsaXplZEluY29tZXMiLCJub3JtSW5jb21lIiwiZ3Jvc3MiLCJ0YXgiLCJuZXQiLCJiaXdlZWtseSIsImdldEhvdXJzIiwiYWxsSW5jb21lcyIsInNlbGYiLCJ0eXBlcyIsImFsbEluY29tZVR5cGVzIiwiZ2V0VHlwZSIsInByb3BlcnR5IiwiaXNGaW5pdGUiLCJ5ZWFybHlHcm9zcyIsInllYXJseU5ldCIsInRvdGFsWWVhcmx5R3Jvc3MiLCJ0b3RhbFllYXJseU5ldCIsInRvdGFsWWVhcmx5VGF4IiwiY2FsY3VsYXRlUGF5cmF0ZSIsIndhZ2UiLCJwcm9qZWN0ZWRCYWxhbmNlU2VydmljZSIsImdldEJhbGFuY2UiLCJjb3JlRXhwZW5zZXMiLCJtdWx0aXBsZSIsImlzTnVtYmVyIiwiZ2V0Q29yZUV4cGVuc2VzIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIndlbGNvbWVNZXNzYWdlIiwiZmlsdGVyIiwiZGF0YSIsInByb3BlcnR5TmFtZSIsImlzU3RyaW5nIiwicmVzdWx0cyIsImtleXMiLCJpIiwidmFsIiwiaXNVbmRlZmluZWQiLCJzZXJ2aWNlIiwiY29uc3RhbnQiLCJwYXlJbmZvIiwiY2FsY3VsYXRlZFBheXJhdGUiLCJjYWxjdWxh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VixFQUFBNUQsTUFBQXJCLEVBQUFxQixTTDZHQU8sUUFBQXdFLE9BQUEsbUJBQ0FhLFFBQUEsaUJBQUEsS0FBQSxpQkFBQWpILGdCTTVKQTRCLFFBQUF3RSxPQUFBLG1CQUNBQyxXQUFBLDhCQUFBLDBCQUNBLFNBQUFQLEdBQ0EsR0FBQWIsR0FBQXZDLElBR0F1QyxHQUFBYyxXQUFBRCxFQUFBQyxXQUtBZCxFQUFBZSxhQUFBRixFQUFBSyxtQkxLQXZFLFFBQUF3RSxPQUFBLG1CQUNBYSxRQUFBLDJCQUFBLGdCQUFBLGdCQUFBbkIiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYnVkZ2V0U2VydmljZSgkcSwgZGVwbG95ZFNlcnZpY2UsIGluY29tZVNlcnZpY2UpIHtcclxuXHR2YXIgYnVkZ2V0cyA9IFtdO1xyXG5cdHZhciBidWRnZXRJdGVtcyA9IFtdO1xyXG5cclxuXHQvL0dldHMgYW5kIFNhdmVzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0Ly9idWRnZXRzXHJcblx0dmFyIGdldEFsbEJ1ZGdldHMgPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmKGJ1ZGdldHMubGVuZ3RoICE9IDApe1xyXG5cdFx0XHRyZXR1cm4gJHEud2hlbihidWRnZXRzKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBkZXBsb3lkU2VydmljZS5nZXRBbGxCdWRnZXRzKClcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oYWxsQnVkZ2V0cykge1xyXG5cdFx0XHRcdGJ1ZGdldHMgPSBhbGxCdWRnZXRzO1xyXG5cdFx0XHRcdHJldHVybiBidWRnZXRzO1xyXG5cdFx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHR2YXIgc2F2ZUJ1ZGdldCA9IGZ1bmN0aW9uKG5ld0J1ZGdldCkge1xyXG5cdFx0ZGVwbG95ZFNlcnZpY2Uuc2F2ZUJ1ZGdldChuZXdCdWRnZXQpXHJcblx0XHRcdC50aGVuKGZ1bmN0aW9uKG5ld0J1ZGdldCkge1xyXG5cdFx0XHRcdGJ1ZGdldHMucHVzaChuZXdCdWRnZXQpO1xyXG5cdFx0XHR9LCBmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHR2YXIgZ2V0QnVkZ2V0ID0gZnVuY3Rpb24oYnVkZ2V0SWQpIHtcclxuXHRcdGRlcGxveWRTZXJ2aWNlLmdldEJ1ZGdldChidWRnZXRJZClcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oYnVkZ2V0KSB7XHJcblx0XHRcdFx0cmV0dXJuIGJ1ZGdldDtcclxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyKTtcclxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdFx0fSk7XHJcblx0fTtcclxuXHJcblx0Ly9idWRnZXQtaXRlbXNcclxuXHR2YXIgZ2V0QWxsQnVkZ2V0SXRlbXMgPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmKGJ1ZGdldEl0ZW1zLmxlbmd0aCAhPSAwKXtcclxuXHRcdFx0cmV0dXJuICRxLndoZW4oYnVkZ2V0SXRlbXMpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGRlcGxveWRTZXJ2aWNlLmdldEFsbEJ1ZGdldEl0ZW1zKClcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oYWxsQnVkZ2V0SXRlbXMpIHtcclxuXHRcdFx0XHRidWRnZXRJdGVtcyA9IGFsbEJ1ZGdldEl0ZW1zO1xyXG5cdFx0XHRcdHJldHVybiBidWRnZXRJdGVtcztcclxuXHRcdFx0fSk7XHJcblx0fTtcclxuXHJcblx0dmFyIHNhdmVCdWRnZXRJdGVtID0gZnVuY3Rpb24obmV3QnVkZ2V0SXRlbSkge1xyXG5cdFx0ZGVwbG95ZFNlcnZpY2Uuc2F2ZUJ1ZGdldEl0ZW0obmV3QnVkZ2V0SXRlbSlcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24obmV3QnVkZ2V0SXRlbSkge1xyXG5cdFx0XHRcdGJ1ZGdldEl0ZW1zLnB1c2gobmV3QnVkZ2V0SXRlbSk7XHJcblx0XHRcdH0sIGZ1bmN0aW9uKGVycikge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycik7XHJcblx0XHRcdH0pO1xyXG5cdH07XHJcblx0Ly9FbmQgR2V0cyBhbmQgU2F2ZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHQvL1N0YXRpc3RpY3MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0dmFyIHRvdGFsID0gZnVuY3Rpb24oYnVkZ2V0KSB7XHJcblx0XHRyZXR1cm4gYnVkZ2V0SXRlbXMucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cnIpIHtcclxuXHRcdFx0aWYoY3Vyci5idWRnZXRJZCA9PSBidWRnZXQuaWQpXHJcblx0XHRcdFx0cmV0dXJuIHByZXYgKyBjdXJyLmFtb3VudDtcclxuXHRcdFx0cmV0dXJuIHByZXY7XHJcblx0XHR9LCAwKTtcclxuXHR9O1xyXG5cclxuXHR2YXIgdG90YWxDb3JlID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdG90YWxDb3JlID0gMDtcclxuXHJcblx0XHRhbmd1bGFyLmZvckVhY2goYnVkZ2V0cywgZnVuY3Rpb24oYnVkZ2V0KSB7XHJcblx0XHRcdGlmKGJ1ZGdldC5uYW1lID09ICdGaXhlZCcgfHwgYnVkZ2V0Lm5hbWUgPT0gJ0ZsZXgnKSB7XHJcblx0XHRcdFx0dmFyIHggPSB0b3RhbChidWRnZXQpO1xyXG5cdFx0XHRcdHRvdGFsQ29yZSArPSB4O1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gdG90YWxDb3JlO1xyXG5cdH07XHJcblxyXG5cdHZhciB0b3RhbEFsbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIGJ1ZGdldEl0ZW1zLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyKSB7XHJcblx0XHRcdHJldHVybiBwcmV2ICsgY3Vyci5hbW91bnQ7XHJcblx0XHR9LCAwKTtcclxuXHR9O1xyXG5cclxuXHR2YXIgYnVkZ2V0Q2FwID0gZnVuY3Rpb24oYnVkZ2V0KSB7XHJcblx0XHRyZXR1cm4gYnVkZ2V0LnBlcmNlbnRBbGxvdG1lbnQgLyAxMDAgKiBpbmNvbWVTZXJ2aWNlLnRvdGFsKCduZXQnKTtcclxuXHR9O1xyXG5cclxuXHR2YXIgYnVkZ2V0VXRpbGl6YXRpb24gPSBmdW5jdGlvbihidWRnZXQpIHtcclxuXHRcdHJldHVybiB0b3RhbChidWRnZXQpIC8gaW5jb21lU2VydmljZS50b3RhbCgnZ3Jvc3MnKSAqIDEwMDtcclxuXHR9O1xyXG5cclxuXHR2YXIgYnVkZ2V0QmFsYW5jZSA9IGZ1bmN0aW9uKGJ1ZGdldCkge1xyXG5cdFx0cmV0dXJuIGJ1ZGdldENhcChidWRnZXQpIC0gdG90YWwoYnVkZ2V0KTtcclxuXHR9O1xyXG5cclxuXHR2YXIgZ3VpZGVsaW5lVG90YWwgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiBidWRnZXRzLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyKSB7XHJcblx0XHRcdHJldHVybiBwcmV2ICsgY3Vyci5wZXJjZW50QWxsb3RtZW50O1xyXG5cdFx0fSwgMCk7XHJcblx0fTtcclxuXHJcblx0dmFyIHRheFV0aWxpemF0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZ3Jvc3NJbmNvbWUgPSBpbmNvbWVTZXJ2aWNlLnRvdGFsKCdncm9zcycpO1xyXG5cdFx0dmFyIG5ldEluY29tZSA9IGluY29tZVNlcnZpY2UudG90YWwoJ25ldCcpO1xyXG5cclxuXHRcdHJldHVybiAoZ3Jvc3NJbmNvbWUgLSBuZXRJbmNvbWUpIC8gZ3Jvc3NJbmNvbWUgKiAxMDA7XHJcblx0fTtcclxuXHJcblx0dmFyIG92ZXJ2aWV3VXRpbGl6YXRpb25Ub3RhbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIGJ1ZGdldHMucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cnIpIHtcclxuXHRcdFx0cmV0dXJuIHByZXYgKyBidWRnZXRVdGlsaXphdGlvbihjdXJyKTtcclxuXHRcdH0sIHRheFV0aWxpemF0aW9uKCkpO1xyXG5cdH07XHJcblx0Ly9FbmQgU3RhdGlzdGljcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuXHR0aGlzLmdldEFsbEJ1ZGdldHMgPSBnZXRBbGxCdWRnZXRzO1xyXG5cdHRoaXMuc2F2ZUJ1ZGdldCA9IHNhdmVCdWRnZXQ7XHJcblx0dGhpcy5nZXRCdWRnZXQgPSBnZXRCdWRnZXQ7XHJcblx0dGhpcy5nZXRBbGxCdWRnZXRJdGVtcyA9IGdldEFsbEJ1ZGdldEl0ZW1zO1xyXG5cdHRoaXMuc2F2ZUJ1ZGdldEl0ZW0gPSBzYXZlQnVkZ2V0SXRlbTtcclxuXHR0aGlzLnRvdGFsID0gdG90YWw7XHJcblx0dGhpcy50b3RhbENvcmUgPSB0b3RhbENvcmU7XHJcblx0dGhpcy50b3RhbEFsbCA9IHRvdGFsQWxsO1xyXG5cclxuXHR0aGlzLmJ1ZGdldENhcCA9IGJ1ZGdldENhcDtcclxuXHR0aGlzLmJ1ZGdldFV0aWxpemF0aW9uID0gYnVkZ2V0VXRpbGl6YXRpb247XHJcblx0dGhpcy5idWRnZXRCYWxhbmNlID0gYnVkZ2V0QmFsYW5jZTtcclxuXHR0aGlzLmd1aWRlbGluZVRvdGFsID0gZ3VpZGVsaW5lVG90YWw7XHJcblx0dGhpcy50YXhVdGlsaXphdGlvbiA9IHRheFV0aWxpemF0aW9uO1xyXG5cdHRoaXMub3ZlcnZpZXdVdGlsaXphdGlvblRvdGFsID0gb3ZlcnZpZXdVdGlsaXphdGlvblRvdGFsO1xyXG59XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYnVkZ2V0dGluZ0lzRnVuJylcclxuXHQuc2VydmljZSgnYnVkZ2V0U2VydmljZScsIFsnJHEnLCAnZGVwbG95ZFNlcnZpY2UnLCAnaW5jb21lU2VydmljZScsIGJ1ZGdldFNlcnZpY2VdKTsiLCJmdW5jdGlvbiBkZXBsb3lkU2VydmljZSgkaHR0cCwgJHEsIGRlcGxveWQpIHtcclxuXHQvL2J1ZGdldHNcclxuXHR2YXIgYnVkZ2V0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcblx0XHQkaHR0cC5nZXQoZGVwbG95ZCArICcvYnVkZ2V0cycpXHJcblx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGJ1ZGdldHMpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKGJ1ZGdldHMpO1xyXG5cdFx0XHR9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcblx0fTtcclxuXHJcblx0dmFyIHNhdmVCdWRnZXQgPSBmdW5jdGlvbihuZXdCdWRnZXQpIHtcclxuXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG5cdFx0JGh0dHAucG9zdChkZXBsb3lkICsgJy9idWRnZXRzJywge1xyXG5cdFx0XHRuYW1lOiBuZXdCdWRnZXQubmFtZSxcclxuXHRcdFx0cGVyY2VudEFsbG90bWVudDogbmV3QnVkZ2V0LnBlcmNlbnRcclxuXHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24oYnVkZ2V0KSB7XHJcblx0XHRcdGRlZmVycmVkLnJlc29sdmUoYnVkZ2V0KTtcclxuXHRcdH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xyXG5cdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cdH07XHJcblxyXG5cdHZhciBnZXRCdWRnZXQgPSBmdW5jdGlvbihidWRnZXRJZCkge1xyXG5cdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcblx0XHQkaHR0cC5nZXQoZGVwbG95ZCArICcvYnVkZ2V0cycsIHtcclxuXHRcdFx0aWQ6IGJ1ZGdldElkXHJcblx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKGJ1ZGdldCl7XHJcblx0XHRcdGRlZmVycmVkLnJlc29sdmUoYnVkZ2V0KTtcclxuXHRcdH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xyXG5cdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cdH07XHJcblxyXG5cdHZhciBidWRnZXRJdGVtcyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcblx0XHQkaHR0cC5nZXQoZGVwbG95ZCArICcvYnVkZ2V0LWl0ZW1zJylcclxuXHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oaXRlbXMpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKGl0ZW1zKTtcclxuXHRcdFx0fSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcblx0fTtcclxuXHJcblx0dmFyIHNhdmVCdWRnZXRJdGVtID0gZnVuY3Rpb24obmV3QnVkZ2V0SXRlbSkge1xyXG5cdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcblx0XHQkaHR0cC5wb3N0KGRlcGxveWQgKyAnL2J1ZGdldC1pdGVtcycsIHtcclxuXHRcdFx0bmFtZTogbmV3QnVkZ2V0SXRlbS5uYW1lLFxyXG5cdFx0XHRhbW91bnQ6IG5ld0J1ZGdldEl0ZW0uYW1vdW50LFxyXG5cdFx0XHRidWRnZXRJZDogbmV3QnVkZ2V0SXRlbS5idWRnZXQuaWRcclxuXHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24obmV3QnVkZ2V0SXRlbSkge1xyXG5cdFx0XHRkZWZlcnJlZC5yZXNvbHZlKG5ld0J1ZGdldEl0ZW0pO1xyXG5cdFx0fSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XHJcblx0XHRcdGRlZmVycmVkLnJlamVjdChlcnIpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcblx0fTtcclxuXHJcblx0Ly9pbmNvbWVzXHJcblx0dmFyIGluY29tZXMgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG5cdFx0JGh0dHAuZ2V0KGRlcGxveWQgKyAnL2luY29tZS1zb3VyY2VzJylcclxuXHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oaW5jb21lcykge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoaW5jb21lcyk7XHJcblx0XHRcdH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdChlcnIpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHR9O1xyXG5cclxuXHR2YXIgc2F2ZUluY29tZSA9IGZ1bmN0aW9uKG5ld0luY29tZSkge1xyXG5cdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcblx0XHQkaHR0cC5wb3N0KGRlcGxveWQgKyAnL2luY29tZS1zb3VyY2VzJywge1xyXG5cdFx0XHRqb2I6IG5ld0luY29tZS5qb2IsXHJcblx0XHRcdGluY29tZVR5cGVJZDogbmV3SW5jb21lLmluY29tZVR5cGUuaWQsXHJcblx0XHRcdHBheXJhdGU6IG5ld0luY29tZS5wYXlyYXRlLFxyXG5cdFx0XHRob3VyczogbmV3SW5jb21lLmhvdXJzLFxyXG5cdFx0XHR0YXhQZXJjZW50OiBuZXdJbmNvbWUudGF4UGVyY2VudFxyXG5cdFx0fSkuc3VjY2VzcyhmdW5jdGlvbihpbmNvbWUpIHtcclxuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShpbmNvbWUpO1xyXG5cdFx0fSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XHJcblx0XHRcdGRlZmVycmVkLnJlamVjdChlcnIpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcblx0fTtcclxuXHJcblx0Ly9pbmNvbWUtdHlwZXNcclxuXHR2YXIgaW5jb21lVHlwZXMgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG5cdFx0JGh0dHAuZ2V0KGRlcGxveWQgKyAnL2luY29tZS10eXBlcycpXHJcblx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGluY29tZVR5cGVzKSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShpbmNvbWVUeXBlcyk7XHJcblx0XHRcdH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdChlcnIpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHR9XHJcblxyXG5cdHZhciBpbmNvbWVUeXBlID0gZnVuY3Rpb24oaWQpIHtcclxuXHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG5cdFx0JGh0dHAuZ2V0KGRlcGxveWQgKyAnL2luY29tZS10eXBlcz9pZD0nICsgaWQpXHJcblx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGluY29tZVR5cGUpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHR5cGUpO1xyXG5cdFx0XHR9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cdH07XHJcblxyXG5cdHRoaXMuZ2V0QWxsQnVkZ2V0cyA9IGJ1ZGdldHM7XHJcblx0dGhpcy5zYXZlQnVkZ2V0ID0gc2F2ZUJ1ZGdldDtcclxuXHR0aGlzLmdldEFsbEJ1ZGdldEl0ZW1zID0gYnVkZ2V0SXRlbXM7XHJcblx0dGhpcy5zYXZlQnVkZ2V0SXRlbSA9IHNhdmVCdWRnZXRJdGVtO1xyXG5cdHRoaXMuZ2V0QnVkZ2V0ID0gZ2V0QnVkZ2V0O1xyXG5cclxuXHR0aGlzLmdldEFsbEluY29tZXMgPSBpbmNvbWVzO1xyXG5cdHRoaXMuc2F2ZUluY29tZSA9IHNhdmVJbmNvbWU7XHJcblxyXG5cdHRoaXMuZ2V0QWxsSW5jb21lVHlwZXMgPSBpbmNvbWVUeXBlcztcclxuXHR0aGlzLmdldEluY29tZVR5cGUgPSBpbmNvbWVUeXBlO1xyXG59XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYnVkZ2V0dGluZ0lzRnVuJylcclxuXHQuY29uc3RhbnQoJ2RlcGxveWQnLCAnaHR0cDovL2xvY2FsaG9zdDoyNDAzJylcclxuXHQuc2VydmljZSgnZGVwbG95ZFNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgJ2RlcGxveWQnLCBkZXBsb3lkU2VydmljZV0pOyIsIi8vbm9ybWFsaXplIGluY29tZSBmbGVzaGluZyBvdXQgZ3Jvc3MgYW5kIG5ldCBudW1iZXJzXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUluY29tZXMoaW5jb21lcykge1xyXG5cdGlmKCFhbmd1bGFyLmlzQXJyYXkoaW5jb21lcykpXHJcblx0XHRpbmNvbWVzID0gW2luY29tZXNdO1xyXG5cclxuXHR2YXIgbm9ybWFsaXplZEluY29tZXMgPSBbXTtcclxuXHJcblx0YW5ndWxhci5mb3JFYWNoKGluY29tZXMsIGZ1bmN0aW9uKGluY29tZSkge1xyXG5cdFx0dmFyIG5vcm1JbmNvbWUgPSB7fTtcclxuXHJcblx0XHRub3JtSW5jb21lLmpvYiA9IGluY29tZS5qb2I7XHJcblx0XHRub3JtSW5jb21lLnBheXJhdGUgPSBpbmNvbWUucGF5cmF0ZTtcclxuXHRcdG5vcm1JbmNvbWUuaG91cnMgPSBpbmNvbWUuaG91cnM7XHJcblx0XHRub3JtSW5jb21lLmdyb3NzID0gaW5jb21lLnBheXJhdGUgKiBpbmNvbWUuaG91cnMgKiA0O1xyXG5cdFx0bm9ybUluY29tZS50YXggPSBpbmNvbWUudGF4UGVyY2VudDtcclxuXHRcdG5vcm1JbmNvbWUubmV0ID0gbm9ybUluY29tZS5ncm9zcyAqICgxIC0gKGluY29tZS50YXhQZXJjZW50IC8gMTAwKSk7XHJcblx0XHRub3JtSW5jb21lLmJpd2Vla2x5ID0gbm9ybUluY29tZS5uZXQgLyAyO1xyXG5cclxuXHRcdG5vcm1hbGl6ZWRJbmNvbWVzLnB1c2gobm9ybUluY29tZSk7XHJcblx0fSlcclxuXHJcblx0cmV0dXJuIG5vcm1hbGl6ZWRJbmNvbWVzO1xyXG59XHJcblxyXG4vL3JldHVybiBob3VycyBiYXNlZCBvbiBpbmNvbWUgdHlwZVxyXG5mdW5jdGlvbiBnZXRIb3Vycyh0eXBlKSB7XHJcblx0c3dpdGNoKHR5cGUpe1xyXG5cdFx0Y2FzZSAnV2Vla2x5JzpcclxuXHRcdGNhc2UgJ0JpLVdlZWtseSc6XHJcblx0XHRjYXNlICdZZWFybHknOlxyXG5cdFx0XHRyZXR1cm4gNDA7XHJcblx0XHRjYXNlICdTZW1pLU1vbnRobHknOlxyXG5cdFx0Y2FzZSAnTW9udGhseSc6XHJcblx0XHRcdHJldHVybiAoNDAqMTMvMTIpOyAvLzEzIHdlZWsgbW9udGhzIGluIDEyIG1vbnRocyBiYXNlZCBvbiA1MiB3ZWVrcy95ZWFyXHJcblx0fVxyXG59XHJcblxyXG4vL2luY29tZSBzZXJ2aWNlIHByb3ZpZGVzIG1ldGhvZHMgdG8gYWRkIGFuZCBnZXQgaW5jb21lc1xyXG5mdW5jdGlvbiBpbmNvbWVTZXJ2aWNlKCRxLCBkZXBsb3lkU2VydmljZSkge1xyXG5cdHZhciBpbmNvbWVzID0gW107XHJcblx0dmFyIGluY29tZVR5cGVzID0gW107XHJcblxyXG5cdFxyXG5cdC8vR2V0cyBhbmQgU2F2ZXMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHQvL2luY29tZXNcclxuXHR2YXIgZ2V0QWxsSW5jb21lcyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYoaW5jb21lcy5sZW5ndGggIT0gMCl7XHJcblx0XHRcdHJldHVybiAkcS53aGVuKGluY29tZXMpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGRlcGxveWRTZXJ2aWNlLmdldEFsbEluY29tZXMoKVxyXG5cdFx0XHQudGhlbihmdW5jdGlvbihhbGxJbmNvbWVzKSB7XHJcblx0XHRcdFx0aW5jb21lcyA9IG5vcm1hbGl6ZUluY29tZXMoYWxsSW5jb21lcyk7XHJcblx0XHRcdFx0cmV0dXJuIGluY29tZXM7XHJcblx0XHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdHZhciBzYXZlSW5jb21lID0gZnVuY3Rpb24obmV3SW5jb21lKXtcclxuXHRcdGRlcGxveWRTZXJ2aWNlLnNhdmVJbmNvbWUobmV3SW5jb21lKVxyXG5cdFx0XHQudGhlbihmdW5jdGlvbihuZXdJbmNvbWUpIHtcclxuXHRcdFx0XHRpbmNvbWVzLnB1c2goc2VsZi5ub3JtYWxpemVJbmNvbWVzKG5ld0luY29tZSlbMF0pO1xyXG5cdFx0XHR9LCBmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpXHJcblx0XHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdC8vaW5jb21lLXR5cGVzXHJcblx0dmFyIGdldEFsbEluY29tZVR5cGVzID0gZnVuY3Rpb24oKSB7XHJcblx0XHRpZihpbmNvbWVUeXBlcyAhPSAwKXtcclxuXHRcdFx0cmV0dXJuICRxLndoZW4odHlwZXMpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGRlcGxveWRTZXJ2aWNlLmdldEFsbEluY29tZVR5cGVzKClcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oYWxsSW5jb21lVHlwZXMpIHtcclxuXHRcdFx0XHRpbmNvbWVUeXBlcyA9IGFsbEluY29tZVR5cGVzO1xyXG5cdFx0XHRcdHJldHVybiBpbmNvbWVUeXBlcztcclxuXHRcdFx0fSk7XHJcblx0fTtcclxuXHJcblx0dmFyIGdldEluY29tZVR5cGUgPSBmdW5jdGlvbihpZCkge1xyXG5cdFx0cmV0dXJuIGRlcGxveWRTZXJ2aWNlLmdldFR5cGUoaWQpXHJcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGluY29tZVR5cGUpIHtcclxuXHRcdFx0XHRyZXR1cm4gaW5jb21lVHlwZTtcclxuXHRcdFx0fSk7XHJcblx0fTtcclxuXHQvL0VuZCBHZXRzIGFuZCBTYXZlcy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdC8vU3RhdGlzdGljcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHR2YXIgdG90YWwgPSBmdW5jdGlvbihwcm9wZXJ0eSkge1xyXG5cdFx0aWYocHJvcGVydHkgPT0gJ3RheCcpIHtcclxuXHRcdFx0cmV0dXJuIHRvdGFsKCdncm9zcycpIC0gdG90YWwoJ25ldCcpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRpZihpbmNvbWVzLmxlbmd0aCA+IDAgJiYgaXNGaW5pdGUoaW5jb21lc1swXVtwcm9wZXJ0eV0pKVxyXG5cdFx0XHRyZXR1cm4gaW5jb21lcy5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VycikgeyByZXR1cm4gcHJldiArIGN1cnJbcHJvcGVydHldOyB9LCAwKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHR2YXIgeWVhcmx5R3Jvc3MgPSBmdW5jdGlvbihpbmNvbWUpIHtcclxuXHRcdHJldHVybiBpbmNvbWUuZ3Jvc3MgKiAxMzsgLy8xMyB3ZWVrIG1vbnRocyBpbiBhIHllYXIgKDUyIHdlZWtzKVxyXG5cdH07XHJcblxyXG5cdHZhciB5ZWFybHlOZXQgPSBmdW5jdGlvbihpbmNvbWUpIHtcclxuXHRcdHJldHVybiBpbmNvbWUubmV0ICogMTM7XHJcblx0fTtcclxuXHJcblx0dmFyIHRvdGFsWWVhcmx5R3Jvc3MgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiBpbmNvbWVzLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyKSB7XHJcblx0XHRcdHJldHVybiBwcmV2ICsgeWVhcmx5R3Jvc3MoY3Vycik7XHJcblx0XHR9LCAwKTtcclxuXHR9O1xyXG5cclxuXHR2YXIgdG90YWxZZWFybHlOZXQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiBpbmNvbWVzLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyKSB7XHJcblx0XHRcdHJldHVybiBwcmV2ICsgeWVhcmx5TmV0KGN1cnIpO1xyXG5cdFx0fSwgMCk7XHJcblx0fTtcclxuXHJcblx0dmFyIHRvdGFsWWVhcmx5VGF4ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdG90YWxZZWFybHlHcm9zcygpIC0gdG90YWxZZWFybHlOZXQoKTtcclxuXHR9O1xyXG5cclxuXHR2YXIgY2FsY3VsYXRlUGF5cmF0ZSA9IGZ1bmN0aW9uIGNhbGN1bGF0ZVBheXJhdGUodHlwZSwgd2FnZSwgaG91cnMpe1xyXG5cdFx0aWYoIWhvdXJzKVxyXG5cdFx0XHRob3VycyA9IDQwO1xyXG5cclxuXHRcdHN3aXRjaCh0eXBlLm5hbWUpe1xyXG5cdFx0XHRjYXNlICdXZWVrbHknOlxyXG5cdFx0XHRcdHJldHVybiB3YWdlIC8gaG91cnM7IC8vZG8gbm90aGluZyBwYXlyYXRlIGlzIHdoYXQgaXQgaXNcclxuXHRcdFx0Y2FzZSAnQmktV2Vla2x5JzpcclxuXHRcdFx0XHRyZXR1cm4gd2FnZSAvIChob3VycyAqIDIpOyAvLzgwIGhvdXJzIGluIDIgd2Vla3NcclxuXHRcdFx0Y2FzZSAnU2VtaS1Nb250aGx5JzpcclxuXHRcdFx0XHRyZXR1cm4gd2FnZSAvIChob3VycyAqIDEzIC8gNik7IC8vODYuNjY2NiBob3VycyBpbiBhIHNlbWktbW9udGhcclxuXHRcdFx0Y2FzZSAnTW9udGhseSc6XHJcblx0XHRcdFx0cmV0dXJuIHdhZ2UgLyAoaG91cnMgKiAxMyAvIDMpOyAvLzE3My4zMzMzIGhvdXJzIGluIGEgbW9udGhcclxuXHRcdFx0Y2FzZSAnWWVhcmx5JzpcclxuXHRcdFx0XHRyZXR1cm4gd2FnZSAvIChob3VycyAqIDUyKTsgLy8vMjA4MCBob3VycyBpbiBhIHllYXJcclxuXHRcdH1cclxuXHR9O1xyXG5cdC8vRW5kIFN0YXRpc3RpY3MgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0dGhpcy5nZXRBbGxJbmNvbWVzID0gZ2V0QWxsSW5jb21lcztcclxuXHR0aGlzLnNhdmVJbmNvbWUgPSBzYXZlSW5jb21lO1xyXG5cclxuXHR0aGlzLmdldEFsbEluY29tZVR5cGVzID0gZ2V0QWxsSW5jb21lVHlwZXM7XHJcblx0dGhpcy5nZXRJbmNvbWVUeXBlID0gZ2V0SW5jb21lVHlwZTtcclxuXHJcblx0dGhpcy55ZWFybHlHcm9zcyA9IHllYXJseUdyb3NzO1xyXG5cdHRoaXMudG90YWxZZWFybHlHcm9zcyA9IHRvdGFsWWVhcmx5R3Jvc3M7XHJcblx0dGhpcy55ZWFybHlOZXQgPSB5ZWFybHlOZXQ7XHJcblx0dGhpcy50b3RhbFllYXJseU5ldCA9IHRvdGFsWWVhcmx5TmV0O1xyXG5cdHRoaXMudG90YWxZZWFybHlUYXggPSB0b3RhbFllYXJseVRheDtcclxuXHR0aGlzLnRvdGFsID0gdG90YWw7XHJcblxyXG5cdHRoaXMuY2FsY3VsYXRlUGF5cmF0ZSA9IGNhbGN1bGF0ZVBheXJhdGU7XHJcbn1cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdidWRnZXR0aW5nSXNGdW4nKVxyXG5cdC5zZXJ2aWNlKCdpbmNvbWVTZXJ2aWNlJywgWyckcScsICdkZXBsb3lkU2VydmljZScsIGluY29tZVNlcnZpY2VdKTsiLCIvL3Byb2plY3RlZCBiYWxhbmNlIHNlcnZpY2VcclxuZnVuY3Rpb24gcHJvamVjdGVkQmFsYW5jZVNlcnZpY2UoaW5jb21lU2VydmljZSwgYnVkZ2V0U2VydmljZSkge1xyXG5cdHZhciBiYWxhbmNlID0gMDtcclxuXHJcblx0dmFyIGdldEJhbGFuY2UgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiBpbmNvbWVTZXJ2aWNlLnRvdGFsKCduZXQnKSAtIGJ1ZGdldFNlcnZpY2UudG90YWxBbGwoKTtcclxuXHR9O1xyXG5cclxuXHR2YXIgY29yZUV4cGVuc2VzID0gZnVuY3Rpb24obXVsdGlwbGUpIHtcclxuXHRcdHJldHVybiAoYW5ndWxhci5pc051bWJlcihtdWx0aXBsZSkpID8gYnVkZ2V0U2VydmljZS50b3RhbENvcmUoKSAqIG11bHRpcGxlIDogYnVkZ2V0U2VydmljZS50b3RhbENvcmUoKTtcclxuXHR9O1xyXG5cclxuXHR0aGlzLmdldEJhbGFuY2UgPSBnZXRCYWxhbmNlO1xyXG5cdHRoaXMuZ2V0Q29yZUV4cGVuc2VzID0gY29yZUV4cGVuc2VzO1xyXG59XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYnVkZ2V0dGluZ0lzRnVuJylcclxuXHQuc2VydmljZSgncHJvamVjdGVkQmFsYW5jZVNlcnZpY2UnLCBbJ2luY29tZVNlcnZpY2UnLCAnYnVkZ2V0U2VydmljZScsIHByb2plY3RlZEJhbGFuY2VTZXJ2aWNlXSk7IiwiYW5ndWxhci5tb2R1bGUoJ2J1ZGdldHRpbmdJc0Z1bicsIFsnYW5ndWxhci5maWx0ZXInXSlcclxuXHQuY29udHJvbGxlcignQmFzZUNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSkge1xyXG5cdFx0JHNjb3BlLndlbGNvbWVNZXNzYWdlID0gJ1dlbGNvbWUgU2F2eSBCdWRnZXR0ZXInO1xyXG5cdH1dKTsiLCJhbmd1bGFyLm1vZHVsZShcImN1c3RvbUZpbHRlcnNcIiwgW10pXHJcbiAgICAuZmlsdGVyKFwidW5pcXVlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGEsIHByb3BlcnR5TmFtZSkge1xyXG4gICAgICAgICAgICBpZiAoYW5ndWxhci5pc0FycmF5KGRhdGEpICYmIGFuZ3VsYXIuaXNTdHJpbmcocHJvcGVydHlOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0ge307XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gZGF0YVtpXVtwcm9wZXJ0eU5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzVW5kZWZpbmVkKGtleXNbdmFsXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5c1t2YWxdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGRhdGFbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ2J1ZGdldHRpbmdJc0Z1bicpXHJcblx0LmNvbnRyb2xsZXIoJ0J1ZGdldENvbnRyb2xsZXInLCBbJ2J1ZGdldFNlcnZpY2UnLCAnaW5jb21lU2VydmljZScsIGZ1bmN0aW9uKGJ1ZGdldFNlcnZpY2UsIGluY29tZVNlcnZpY2UpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgXHRcdC8vaW5pdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRzZWxmLmJ1ZGdldHMgPSBbXTtcclxuXHRcdHNlbGYuYnVkZ2V0SXRlbXMgPSBbXTtcclxuICBcdFx0XHJcbiAgXHRcdC8vR2V0IGJ1ZGdldHMgYW5kIGJ1ZGdldCBpdGVtc1xyXG4gIFx0XHRidWRnZXRTZXJ2aWNlLmdldEFsbEJ1ZGdldHMoKVxyXG4gIFx0XHRcdC50aGVuKGZ1bmN0aW9uKGJ1ZGdldHMpIHtcclxuICBcdFx0XHRcdHNlbGYuYnVkZ2V0cyA9IGJ1ZGdldHM7XHJcbiAgXHRcdFx0XHRidWRnZXRTZXJ2aWNlLmdldEFsbEJ1ZGdldEl0ZW1zKClcclxuICBcdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oaXRlbXMpIHtcclxuICBcdFx0XHRcdFx0XHRzZWxmLmJ1ZGdldEl0ZW1zID0gaXRlbXM7XHJcbiAgXHRcdFx0XHRcdH0sIGZ1bmN0aW9uKGVycikge1xyXG4gIFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGVycik7XHJcbiAgXHRcdFx0XHRcdH0pO1xyXG4gIFx0XHRcdH0sIGZ1bmN0aW9uKGVycikge1xyXG4gIFx0XHRcdFx0Y29uc29sZS5sb2coZXJyKTtcclxuICBcdFx0XHR9KTtcclxuXHJcbiAgXHRcdC8vaW5pdCBlbmQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIFx0XHQvL2FjdGlvbnMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cdFx0c2VsZi5uZXdCdWRnZXQgPSB7fTtcclxuXHJcblx0XHRzZWxmLnNhdmVCdWRnZXQgPSBmdW5jdGlvbihuZXdCdWRnZXQpIHtcclxuXHRcdFx0YnVkZ2V0U2VydmljZS5zYXZlQnVkZ2V0KG5ld0J1ZGdldCk7XHJcblx0XHRcdHNlbGYubmV3QnVkZ2V0ID0ge307XHJcblx0XHR9O1xyXG5cclxuXHRcdHNlbGYubmV3QnVkZ2V0SXRlbSA9IHt9O1xyXG5cclxuXHRcdHNlbGYuc2F2ZUJ1ZGdldEl0ZW0gPSBmdW5jdGlvbihuZXdCdWRnZXRJdGVtKSB7XHJcblx0XHRcdGJ1ZGdldFNlcnZpY2Uuc2F2ZUJ1ZGdldEl0ZW0obmV3QnVkZ2V0SXRlbSk7XHJcblx0XHRcdHNlbGYubmV3QnVkZ2V0SXRlbSA9IHt9O1xyXG5cdFx0fTtcclxuXHJcblx0XHRzZWxmLmJ1ZGdldENhcCA9IGJ1ZGdldFNlcnZpY2UuYnVkZ2V0Q2FwO1xyXG5cdFx0c2VsZi5idWRnZXRVdGlsaXphdGlvbiA9IGJ1ZGdldFNlcnZpY2UuYnVkZ2V0VXRpbGl6YXRpb247XHJcblx0XHRzZWxmLmJ1ZGdldEJhbGFuY2UgPSBidWRnZXRTZXJ2aWNlLmJ1ZGdldEJhbGFuY2U7XHJcblx0XHRzZWxmLmd1aWRlbGluZVRvdGFsID0gYnVkZ2V0U2VydmljZS5ndWlkZWxpbmVUb3RhbDtcclxuXHRcdHNlbGYudGF4VXRpbGl6YXRpb24gPSBidWRnZXRTZXJ2aWNlLnRheFV0aWxpemF0aW9uO1xyXG5cdFx0c2VsZi5vdmVydmlld1V0aWxpemF0aW9uVG90YWwgPSBidWRnZXRTZXJ2aWNlLm92ZXJ2aWV3VXRpbGl6YXRpb25Ub3RhbDtcclxuXHRcdHNlbGYudG90YWwgPSBidWRnZXRTZXJ2aWNlLnRvdGFsO1xyXG5cclxuXHRcdC8vYWN0aW9ucyBlbmQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0fV0pOyIsImFuZ3VsYXIubW9kdWxlKCdidWRnZXR0aW5nSXNGdW4nKVxyXG5cdC5jb250cm9sbGVyKCdJbmNvbWVDb250cm9sbGVyJywgWydpbmNvbWVTZXJ2aWNlJywgXHJcblx0XHRmdW5jdGlvbihpbmNvbWVTZXJ2aWNlKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRcdC8vaW5pdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0c2VsZi5pbmNvbWVzID0gW107XHJcblx0XHRcdHNlbGYuaW5jb21lVHlwZXMgPSBbXTtcclxuXHJcblx0XHRcdC8vR2V0IGluY29tZXNcclxuXHRcdFx0aW5jb21lU2VydmljZS5nZXRBbGxJbmNvbWVzKClcclxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihpbmNvbWVzKSB7XHJcblx0XHRcdFx0XHRzZWxmLmluY29tZXMgPSBpbmNvbWVzO1xyXG5cdFx0XHRcdH0sIGZ1bmN0aW9uKGVycikge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vR2V0IGluY29tZVR5cGVzXHJcblx0XHRcdGluY29tZVNlcnZpY2UuZ2V0QWxsSW5jb21lVHlwZXMoKVxyXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGluY29tZVR5cGVzKSB7XHJcblx0XHRcdFx0XHRzZWxmLmluY29tZVR5cGVzID0gaW5jb21lVHlwZXM7XHJcblx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyKSB7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHQvL2luaXQgZW5kLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5cdFx0XHQvL2FjdGlvbnMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRcdHNlbGYubmV3SW5jb21lID0ge307XHJcblxyXG5cdFx0XHRzZWxmLnNhdmVJbmNvbWUgPSBmdW5jdGlvbihuZXdJbmNvbWUpIHtcclxuXHRcdFx0XHRpbmNvbWVTZXJ2aWNlLnNhdmVJbmNvbWUobmV3SW5jb21lKTtcclxuXHRcdFx0XHRzZWxmLm5ld0luY29tZSA9IHt9O1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0c2VsZi5wYXlJbmZvID0ge307XHJcblx0XHRcdHNlbGYuY2FsY3VsYXRlZFBheXJhdGUgPSAwO1xyXG5cdFx0XHRzZWxmLmNhbGN1bGF0ZWRIb3VycyA9IDA7XHJcblxyXG5cdFx0XHRzZWxmLmNhbGN1bGF0ZVBheXJhdGUgPSBmdW5jdGlvbihwYXlJbmZvKSB7XHJcblx0XHRcdFx0c2VsZi5jYWxjdWxhdGVkUGF5cmF0ZSA9IGluY29tZVNlcnZpY2UuY2FsY3VsYXRlUGF5cmF0ZShwYXlJbmZvLmluY29tZVR5cGUsIHBheUluZm8ud2FnZSwgcGF5SW5mby5ob3Vycyk7XHJcblx0XHRcdFx0c2VsZi5jYWxjdWxhdGVkSG91cnMgPSAocGF5SW5mby5ob3VycykgPyBwYXlJbmZvLmhvdXJzIDogNDA7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRzZWxmLnRvdGFsWWVhcmx5R3Jvc3MgPSBpbmNvbWVTZXJ2aWNlLnRvdGFsWWVhcmx5R3Jvc3M7XHJcblx0XHRcdHNlbGYudG90YWxZZWFybHlOZXQgPSBpbmNvbWVTZXJ2aWNlLnRvdGFsWWVhcmx5TmV0O1xyXG5cdFx0XHRzZWxmLnRvdGFsWWVhcmx5VGF4ID0gaW5jb21lU2VydmljZS50b3RhbFllYXJseVRheDtcclxuXHRcdFx0c2VsZi50b3RhbCA9IGluY29tZVNlcnZpY2UudG90YWw7XHJcblx0XHRcdC8vYWN0aW9ucyBlbmQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHR9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2J1ZGdldHRpbmdJc0Z1bicpXHJcblx0LmNvbnRyb2xsZXIoJ1Byb2plY3RlZEJhbGFuY2VDb250cm9sbGVyJywgWydwcm9qZWN0ZWRCYWxhbmNlU2VydmljZScsIFxyXG5cdFx0ZnVuY3Rpb24ocHJvamVjdGVkQmFsYW5jZVNlcnZpY2UpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzOyBcclxuXHJcblx0XHRcdC8vaW5pdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0c2VsZi5nZXRCYWxhbmNlID0gcHJvamVjdGVkQmFsYW5jZVNlcnZpY2UuZ2V0QmFsYW5jZTtcclxuXHJcblx0XHRcdC8vaW5pdCBlbmQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcblx0XHRcdC8vYWN0aW9ucy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHRcdFx0c2VsZi5jb3JlRXhwZW5zZXMgPSBwcm9qZWN0ZWRCYWxhbmNlU2VydmljZS5nZXRDb3JlRXhwZW5zZXM7XHJcblxyXG5cdFx0XHQvL2FjdGlvbnMgZW5kLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0fV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
