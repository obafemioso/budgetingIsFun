function normalizeIncomes(e){angular.isArray(e)||(e=[e]);var n=[];return angular.forEach(e,function(e){var t={};t.job=e.job,t.payrate=e.payrate,t.hours=e.hours,t.gross=e.payrate*e.hours*4,t.tax=e.taxPercent,t.net=t.gross*(1-e.taxPercent/100),t.biweekly=t.net/2,n.push(t)}),n}function deploydService(e,n,t){this.getIncomes=function(){var o=n.defer();return e.get(t+"/income-sources").success(function(e){o.resolve(normalizeIncomes(e))}).error(function(e){o.reject(e)}),o.promise}}function incomeService(e,n,t){this.message="we still made it!?";var o;this.getIncomes=function(){return angular.isDefined(o)?n.when(o):t.getIncomes().then(function(e){return o=e})}}angular.module("budgettingIsFun",["angular.filter"]).controller("BaseController",["$scope",function(e){e.welcomeMessage="Welcome Savy Budgetter"}]),angular.module("customFilters",[]).filter("unique",function(){return function(e,n){if(angular.isArray(e)&&angular.isString(n)){for(var t=[],o={},r=0;r<e.length;r++){var c=e[r][n];angular.isUndefined(o[c])&&(o[c]=!0,t.push(e[r]))}return console.log(t),t}return e}}),angular.module("budgettingIsFun").constant("deployd","http://localhost:2403").controller("BudgetController",["$http","deployd",function(e,n){var t=this;t.budgets=[],t.items=[],e.get(n+"/budgets").success(function(o){t.budgets=o,e.get(n+"/budget-items").success(function(e){t.items=e}).error(function(e){console.log(e)})}).error(function(e){console.log(e)}),t.newBudget={},t.saveBudget=function(o){e.post(n+"/budgets",{name:o.name,percentAllotment:o.percent}).success(function(e){t.newBudget={},t.budgets.push(e)}).error(function(e){console.log(e)})},t.newItem={},t.addItem=function(o){e.post(n+"/budget-items",{name:o.name,amount:o.amount,budgetId:o.budgetId}).success(function(e){t.newItem={},t.items.push(e)}).error(function(e){console.log(e)})},t.total=function(e){var n=0;return angular.forEach(t.items,function(t){t.budgetId==e&&(n+=t.amount)}),n}}]),angular.module("budgettingIsFun").constant("deployd","http://localhost:2403").service("deploydService",["$http","$q","deployd",deploydService]),angular.module("budgettingIsFun").constant("deployd","http://localhost:2403").constant("partTime","23ab7985d307dab2").constant("fullTime","deb0980f74cd6b33").constant("semiMonthly","6eddc802d96c18f2").constant("biWeekly","c585919ae006086c").constant("yearly","a5b60c5bbd52295d").controller("IncomeController",["$http","deployd","partTime","fullTime","semiMonthly","biWeekly","yearly","incomeService",function(e,n,t,o,r,c,s,u){var i=this;i.message=u.message,u.getIncomes().then(function(e){i.incomes=e},function(e){console.log(e)}),i.types=[],e.get(n+"/income-types").success(function(e){i.types=e}).error(function(e){console.log(e)}),i.newIncome={},i.modifyHours=function(){i.newIncome.type&&i.newIncome.type.id!=t&&(i.newIncome.type.id==o?i.newIncome.hours=40:i.newIncome.type.id==r?i.newIncome.hours=43.3333:i.newIncome.type.id==c?i.newIncome.hours=40:i.newIncome.type.id==s&&(i.newIncome.hours=40))},i.addIncome=function(u){u.type.id==t||u.type.id==o||(u.type.id==r?u.payrate=u.payrate/86.6666:u.type.id==c?u.payrate=u.payrate/80:u.type.id==s?u.payrate=u.payrate/2080:console.log("all failed")),e.post(n+"/income-sources",{job:u.job,incomeType:u.type.id,payrate:u.payrate,hours:u.hours,taxPercent:u.taxPercent}).success(function(e){i.newIncome={},i.incomes.push(i.normalizedIncomes(e)[0])}).error(function(e){console.log(e)})}}]),angular.module("budgettingIsFun").service("incomeService",["$http","$q","deploydService",incomeService]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMvZGVwbG95ZC9kZXBsb3lkU2VydmljZS5qcyIsImNvbXBvbmVudHMvaW5jb21lL2luY29tZVNlcnZpY2UuanMiLCJhcHAubW9kdWxlLmpzIiwiZmlsdGVycy9jdXN0b21GaWx0ZXJzLmpzIiwiY29tcG9uZW50cy9idWRnZXQvYnVkZ2V0Q29udHJvbGxlci5qcyIsImNvbXBvbmVudHMvaW5jb21lL2luY29tZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsibm9ybWFsaXplSW5jb21lcyIsImluY29tZXMiLCJhbmd1bGFyIiwiaXNBcnJheSIsIm5vcm1hbGl6ZWRJbmNvbWVzIiwiZm9yRWFjaCIsImluY29tZSIsIm5vcm1JbmNvbWUiLCJqb2IiLCJwYXlyYXRlIiwiaG91cnMiLCJncm9zcyIsInRheCIsInRheFBlcmNlbnQiLCJuZXQiLCJiaXdlZWtseSIsInB1c2giLCJkZXBsb3lkU2VydmljZSIsIiRodHRwIiwiJHEiLCJkZXBsb3lkIiwidGhpcyIsImdldEluY29tZXMiLCJkZWZlcnJlZCIsImRlZmVyIiwiZ2V0Iiwic3VjY2VzcyIsInJlc29sdmUiLCJlcnJvciIsImVyciIsInJlamVjdCIsInByb21pc2UiLCJpbmNvbWVTZXJ2aWNlIiwibWVzc2FnZSIsImlzRGVmaW5lZCIsIndoZW4iLCJ0aGVuIiwiZGF0YSIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJ3ZWxjb21lTWVzc2FnZSIsImZpbHRlciIsInByb3BlcnR5TmFtZSIsImlzU3RyaW5nIiwicmVzdWx0cyIsImtleXMiLCJpIiwibGVuZ3RoIiwidmFsIiwiaXNVbmRlZmluZWQiLCJjb25zb2xlIiwibG9nIiwiY29uc3RhbnQiLCJzZWxmIiwiYnVkZ2V0cyIsIml0ZW1zIiwiY2F0ZWdvcmllcyIsIm5ld0J1ZGdldCIsInNhdmVCdWRnZXQiLCJwb3N0IiwibmFtZSIsInBlcmNlbnRBbGxvdG1lbnQiLCJwZXJjZW50IiwiYnVkZ2V0IiwibmV3SXRlbSIsImFkZEl0ZW0iLCJhbW91bnQiLCJidWRnZXRJZCIsIml0ZW0iLCJ0b3RhbCIsInNlcnZpY2UiLCJwYXJ0VGltZSIsImZ1bGxUaW1lIiwic2VtaU1vbnRobHkiLCJiaVdlZWtseSIsInllYXJseSIsInR5cGVzIiwibmV3SW5jb21lIiwibW9kaWZ5SG91cnMiLCJ0eXBlIiwiaWQiLCJhZGRJbmNvbWUiLCJpbmNvbWVUeXBlIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxrQkFBQUMsR0FDQUMsUUFBQUMsUUFBQUYsS0FDQUEsR0FBQUEsR0FFQSxJQUFBRyxLQWdCQSxPQWRBRixTQUFBRyxRQUFBSixFQUFBLFNBQUFLLEdBQ0EsR0FBQUMsS0FFQUEsR0FBQUMsSUFBQUYsRUFBQUUsSUFDQUQsRUFBQUUsUUFBQUgsRUFBQUcsUUFDQUYsRUFBQUcsTUFBQUosRUFBQUksTUFDQUgsRUFBQUksTUFBQUwsRUFBQUcsUUFBQUgsRUFBQUksTUFBQSxFQUNBSCxFQUFBSyxJQUFBTixFQUFBTyxXQUNBTixFQUFBTyxJQUFBUCxFQUFBSSxPQUFBLEVBQUFMLEVBQUFPLFdBQUEsS0FDQU4sRUFBQVEsU0FBQVIsRUFBQU8sSUFBQSxFQUVBVixFQUFBWSxLQUFBVCxLQUdBSCxFQUdBLFFBQUFhLGdCQUFBQyxFQUFBQyxFQUFBQyxHQUVBQyxLQUFBQyxXQUFBLFdBQ0EsR0FBQUMsR0FBQUosRUFBQUssT0FRQSxPQU5BTixHQUFBTyxJQUFBTCxFQUFBLG1CQUNBTSxRQUFBLFNBQUF6QixHQUNBc0IsRUFBQUksUUFBQTNCLGlCQUFBQyxNQUNBMkIsTUFBQSxTQUFBQyxHQUNBTixFQUFBTyxPQUFBRCxLQUVBTixFQUFBUSxTQ2xDQSxRQUFBQyxlQUFBZCxFQUFBQyxFQUFBRixHQUVBSSxLQUFBWSxRQUFBLG9CQUNBLElBQUFoQyxFQUVBb0IsTUFBQUMsV0FBQSxXQUNBLE1BQUFwQixTQUFBZ0MsVUFBQWpDLEdBQ0FrQixFQUFBZ0IsS0FBQWxDLEdBRUFnQixFQUFBSyxhQUNBYyxLQUFBLFNBQUFDLEdBRUEsTUFEQXBDLEdBQUFvQyxLQ1hBbkMs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b3JtYWxpemVJbmNvbWVzKGluY29tZXMpIHtcclxuXHRcdFx0aWYoIWFuZ3VsYXIuaXNBcnJheShpbmNvbWVzKSlcclxuXHRcdFx0XHRpbmNvbWVzID0gW2luY29tZXNdO1xyXG5cclxuXHRcdFx0dmFyIG5vcm1hbGl6ZWRJbmNvbWVzID0gW107XHJcblxyXG5cdFx0XHRhbmd1bGFyLmZvckVhY2goaW5jb21lcywgZnVuY3Rpb24oaW5jb21lKSB7XHJcblx0XHRcdFx0dmFyIG5vcm1JbmNvbWUgPSB7fTtcclxuXHJcblx0XHRcdFx0bm9ybUluY29tZS5qb2IgPSBpbmNvbWUuam9iO1xyXG5cdFx0XHRcdG5vcm1JbmNvbWUucGF5cmF0ZSA9IGluY29tZS5wYXlyYXRlO1xyXG5cdFx0XHRcdG5vcm1JbmNvbWUuaG91cnMgPSBpbmNvbWUuaG91cnM7XHJcblx0XHRcdFx0bm9ybUluY29tZS5ncm9zcyA9IGluY29tZS5wYXlyYXRlICogaW5jb21lLmhvdXJzICogNDtcclxuXHRcdFx0XHRub3JtSW5jb21lLnRheCA9IGluY29tZS50YXhQZXJjZW50O1xyXG5cdFx0XHRcdG5vcm1JbmNvbWUubmV0ID0gbm9ybUluY29tZS5ncm9zcyAqICgxIC0gKGluY29tZS50YXhQZXJjZW50IC8gMTAwKSk7XHJcblx0XHRcdFx0bm9ybUluY29tZS5iaXdlZWtseSA9IG5vcm1JbmNvbWUubmV0IC8gMjtcclxuXHJcblx0XHRcdFx0bm9ybWFsaXplZEluY29tZXMucHVzaChub3JtSW5jb21lKTtcclxuXHRcdFx0fSlcclxuXHJcblx0XHRcdHJldHVybiBub3JtYWxpemVkSW5jb21lcztcclxuXHRcdH07XHJcblxyXG5mdW5jdGlvbiBkZXBsb3lkU2VydmljZSgkaHR0cCwgJHEsIGRlcGxveWQpIHtcclxuXHJcblx0dGhpcy5nZXRJbmNvbWVzID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuXHRcdCRodHRwLmdldChkZXBsb3lkICsgJy9pbmNvbWUtc291cmNlcycpXHJcblx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGluY29tZXMpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKG5vcm1hbGl6ZUluY29tZXMoaW5jb21lcykpO1xyXG5cdFx0XHR9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoZXJyKTtcclxuXHRcdFx0fSk7XHJcblx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHR9O1xyXG59XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnYnVkZ2V0dGluZ0lzRnVuJylcclxuXHQuY29uc3RhbnQoJ2RlcGxveWQnLCAnaHR0cDovL2xvY2FsaG9zdDoyNDAzJylcclxuXHQuc2VydmljZSgnZGVwbG95ZFNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgJ2RlcGxveWQnLCBkZXBsb3lkU2VydmljZV0pOyIsImZ1bmN0aW9uIGluY29tZVNlcnZpY2UoJGh0dHAsICRxLCBkZXBsb3lkU2VydmljZSkge1xyXG5cclxuXHR0aGlzLm1lc3NhZ2UgPSBcIndlIHN0aWxsIG1hZGUgaXQhP1wiO1xyXG5cdHZhciBpbmNvbWVzO1xyXG5cclxuXHR0aGlzLmdldEluY29tZXMgPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmKGFuZ3VsYXIuaXNEZWZpbmVkKGluY29tZXMpKXtcclxuXHRcdFx0cmV0dXJuICRxLndoZW4oaW5jb21lcyk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZGVwbG95ZFNlcnZpY2UuZ2V0SW5jb21lcygpXHJcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHRcdFx0XHRpbmNvbWVzID0gZGF0YTtcclxuXHRcdFx0XHRyZXR1cm4gaW5jb21lcztcclxuXHRcdFx0fSk7XHJcblx0fTtcclxuXHJcbn1cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdidWRnZXR0aW5nSXNGdW4nKVxyXG5cdC5zZXJ2aWNlKCdpbmNvbWVTZXJ2aWNlJywgWyckaHR0cCcsICckcScsICdkZXBsb3lkU2VydmljZScsIGluY29tZVNlcnZpY2VdKTsiLCJhbmd1bGFyLm1vZHVsZSgnYnVkZ2V0dGluZ0lzRnVuJywgWydhbmd1bGFyLmZpbHRlciddKVxyXG5cdC5jb250cm9sbGVyKCdCYXNlQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKSB7XHJcblx0XHQkc2NvcGUud2VsY29tZU1lc3NhZ2UgPSAnV2VsY29tZSBTYXZ5IEJ1ZGdldHRlcic7XHJcblx0fV0pOyIsImFuZ3VsYXIubW9kdWxlKFwiY3VzdG9tRmlsdGVyc1wiLCBbXSlcclxuICAgIC5maWx0ZXIoXCJ1bmlxdWVcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0YSwgcHJvcGVydHlOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzQXJyYXkoZGF0YSkgJiYgYW5ndWxhci5pc1N0cmluZyhwcm9wZXJ0eU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBkYXRhW2ldW3Byb3BlcnR5TmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoa2V5c1t2YWxdKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzW3ZhbF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goZGF0YVtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0cyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnYnVkZ2V0dGluZ0lzRnVuJylcclxuXHQuY29uc3RhbnQoJ2RlcGxveWQnLCAnaHR0cDovL2xvY2FsaG9zdDoyNDAzJylcclxuXHQuY29udHJvbGxlcignQnVkZ2V0Q29udHJvbGxlcicsIFsnJGh0dHAnLCAnZGVwbG95ZCcsIGZ1bmN0aW9uKCRodHRwLCBkZXBsb3lkKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0c2VsZi5idWRnZXRzID0gW107XHJcblx0XHRzZWxmLml0ZW1zID0gW107XHJcbiAgXHJcblx0XHQkaHR0cC5nZXQoZGVwbG95ZCArICcvYnVkZ2V0cycpXHJcblx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKGNhdGVnb3JpZXMpIHtcclxuXHRcdFx0XHRzZWxmLmJ1ZGdldHMgPSBjYXRlZ29yaWVzO1xyXG5cdFx0XHRcdCRodHRwLmdldChkZXBsb3lkICsgJy9idWRnZXQtaXRlbXMnKVxyXG5cdFx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oaXRlbXMpIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5pdGVtcyA9IGl0ZW1zO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5lcnJvcihmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZXJyKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRzZWxmLm5ld0J1ZGdldCA9IHt9O1xyXG5cclxuXHRcdHNlbGYuc2F2ZUJ1ZGdldCA9IGZ1bmN0aW9uKG5ld0J1ZGdldCkge1xyXG5cdFx0XHQkaHR0cC5wb3N0KGRlcGxveWQgKyAnL2J1ZGdldHMnLCB7XHJcblx0XHRcdFx0bmFtZTogbmV3QnVkZ2V0Lm5hbWUsXHJcblx0XHRcdFx0cGVyY2VudEFsbG90bWVudDogbmV3QnVkZ2V0LnBlcmNlbnRcclxuXHRcdFx0fSkuc3VjY2VzcyhmdW5jdGlvbihidWRnZXQpIHtcclxuXHRcdFx0XHRzZWxmLm5ld0J1ZGdldCA9IHt9O1xyXG5cdFx0XHRcdHNlbGYuYnVkZ2V0cy5wdXNoKGJ1ZGdldCk7XHJcblx0XHRcdH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycik7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHRzZWxmLm5ld0l0ZW0gPSB7fTtcclxuXHJcblx0XHRzZWxmLmFkZEl0ZW0gPSBmdW5jdGlvbihuZXdJdGVtKSB7XHJcblx0XHRcdCRodHRwLnBvc3QoZGVwbG95ZCArICcvYnVkZ2V0LWl0ZW1zJywge1xyXG5cdFx0XHRcdG5hbWU6IG5ld0l0ZW0ubmFtZSxcclxuXHRcdFx0XHRhbW91bnQ6IG5ld0l0ZW0uYW1vdW50LFxyXG5cdFx0XHRcdGJ1ZGdldElkOiBuZXdJdGVtLmJ1ZGdldElkXHJcblx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24oaXRlbSl7XHJcblx0XHRcdFx0c2VsZi5uZXdJdGVtID0ge307XHJcblx0XHRcdFx0c2VsZi5pdGVtcy5wdXNoKGl0ZW0pO1xyXG5cdFx0XHR9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0c2VsZi50b3RhbCA9IGZ1bmN0aW9uKGJ1ZGdldElkKSB7XHJcblx0XHRcdHZhciB0b3RhbCA9IDA7XHJcblx0XHRcdGFuZ3VsYXIuZm9yRWFjaChzZWxmLml0ZW1zLCBmdW5jdGlvbihpdGVtKSB7XHJcblx0XHRcdFx0aWYoaXRlbS5idWRnZXRJZCA9PSBidWRnZXRJZClcclxuXHRcdFx0XHRcdHRvdGFsICs9IGl0ZW0uYW1vdW50O1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIHRvdGFsO1xyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgZ2V0QnVkZ2V0ID0gZnVuY3Rpb24oaWQpIHtcclxuXHRcdFx0Zm9yKGkgPSAwOyBpIDwgc2VsZi5idWRnZXRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYoc2VsZi5idWRnZXRzW2ldLmlkID09IGlkKVxyXG5cdFx0XHRcdFx0cmV0dXJuIHNlbGYuYnVkZ2V0c1tpXTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ2J1ZGdldHRpbmdJc0Z1bicpXHJcblx0LmNvbnN0YW50KCdkZXBsb3lkJywgJ2h0dHA6Ly9sb2NhbGhvc3Q6MjQwMycpXHJcblx0LmNvbnN0YW50KCdwYXJ0VGltZScsICcyM2FiNzk4NWQzMDdkYWIyJylcclxuXHQuY29uc3RhbnQoJ2Z1bGxUaW1lJywgJ2RlYjA5ODBmNzRjZDZiMzMnKVxyXG5cdC5jb25zdGFudCgnc2VtaU1vbnRobHknLCAnNmVkZGM4MDJkOTZjMThmMicpXHJcblx0LmNvbnN0YW50KCdiaVdlZWtseScsICdjNTg1OTE5YWUwMDYwODZjJylcclxuXHQuY29uc3RhbnQoJ3llYXJseScsICdhNWI2MGM1YmJkNTIyOTVkJylcclxuXHQuY29udHJvbGxlcignSW5jb21lQ29udHJvbGxlcicsIFsnJGh0dHAnLCAnZGVwbG95ZCcsICdwYXJ0VGltZScsICdmdWxsVGltZScsICdzZW1pTW9udGhseScsICdiaVdlZWtseScsICd5ZWFybHknLCAnaW5jb21lU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCBkZXBsb3lkLCBwYXJ0VGltZSwgZnVsbFRpbWUsIHNlbWlNb250aGx5LCBiaVdlZWtseSwgeWVhcmx5LCBpbmNvbWVTZXJ2aWNlKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0c2VsZi5tZXNzYWdlID0gaW5jb21lU2VydmljZS5tZXNzYWdlO1xyXG5cclxuXHRcdGluY29tZVNlcnZpY2UuZ2V0SW5jb21lcygpXHJcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHRcdFx0XHRzZWxmLmluY29tZXMgPSBkYXRhO1xyXG5cdFx0XHR9LCBmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRzZWxmLnR5cGVzID0gW107XHJcblxyXG5cdFx0JGh0dHAuZ2V0KGRlcGxveWQgKyAnL2luY29tZS10eXBlcycpXHJcblx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHR5cGVzKSB7XHJcblx0XHRcdFx0c2VsZi50eXBlcyA9IHR5cGVzO1xyXG5cdFx0XHR9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRzZWxmLm5ld0luY29tZSA9IHt9O1xyXG5cclxuXHRcdC8vaWYgaW5jb21lIHR5cGUgaXMgcGFydCB0aW1lL2VtcHR5IGVuYWJsZSBob3VycyBmaWVsZFxyXG5cdFx0Ly9lbHNlIGRpc2FibGUgYW5kIHNldCBob3VycyBmaWVsZCB0byBlcXVpdmFsZW50IGhvdXJzIGluICB3ZWVrXHJcblx0XHQvL2ZvciB0aGUgaW5jb21lIHR5cGUgKGkuZS4gZnVsbCB0aW1lIGhvdXJzKVxyXG5cdFx0c2VsZi5tb2RpZnlIb3VycyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZihzZWxmLm5ld0luY29tZS50eXBlICYmIHNlbGYubmV3SW5jb21lLnR5cGUuaWQgIT0gcGFydFRpbWUpIHtcclxuXHRcdFx0XHRpZihzZWxmLm5ld0luY29tZS50eXBlLmlkID09IGZ1bGxUaW1lKSB7XHJcblx0XHRcdFx0XHQvL251bWJlciBvZiBob3VycyBpbiBhIHdlZWsgYmFzZWQgb24gZnVsbFRpbWVcclxuXHRcdFx0XHRcdHNlbGYubmV3SW5jb21lLmhvdXJzID0gNDA7XHJcblx0XHRcdFx0fWVsc2UgaWYoc2VsZi5uZXdJbmNvbWUudHlwZS5pZCA9PSBzZW1pTW9udGhseSkge1xyXG5cdFx0XHRcdFx0Ly9udW1iZXIgb2YgaG91cnMgaW4gYSB3ZWVrIGJhc2VkIG9uIHNlbWlNb250aGx5XHJcblx0XHRcdFx0XHRzZWxmLm5ld0luY29tZS5ob3VycyA9IDQzLjMzMzM7XHJcblx0XHRcdFx0fWVsc2UgaWYoc2VsZi5uZXdJbmNvbWUudHlwZS5pZCA9PSBiaVdlZWtseSkge1xyXG5cdFx0XHRcdFx0Ly9udW1iZXIgb2YgaG91cnMgaW4gYSB3ZWVrIGJhc2VkIG9uIGJpV2Vla2x5XHJcblx0XHRcdFx0XHRzZWxmLm5ld0luY29tZS5ob3VycyA9IDQwO1xyXG5cdFx0XHRcdH1lbHNlIGlmKHNlbGYubmV3SW5jb21lLnR5cGUuaWQgPT0geWVhcmx5KSB7XHJcblx0XHRcdFx0XHQvL251bWJlciBvZiBob3VycyBpbiBhIHdlZWsgYmFzZWQgb24geWVhcmx5XHJcblx0XHRcdFx0XHRzZWxmLm5ld0luY29tZS5ob3VycyA9IDQwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRzZWxmLmFkZEluY29tZSA9IGZ1bmN0aW9uKG5ld0luY29tZSkge1xyXG5cdFx0XHRpZihuZXdJbmNvbWUudHlwZS5pZCA9PSBwYXJ0VGltZSkge1xyXG5cdFx0XHRcdC8vcGF5cmF0ZSBkb2Vzbid0IG5lZWQgYWRqdXN0aW5nXHJcblx0XHRcdH1lbHNlIGlmKG5ld0luY29tZS50eXBlLmlkID09IGZ1bGxUaW1lKSB7XHJcblx0XHRcdFx0Ly9wYXlyYXRlIGRvZXNuJ3QgbmVlZCBhZGp1c3RpbmdcclxuXHRcdFx0fWVsc2UgaWYobmV3SW5jb21lLnR5cGUuaWQgPT0gc2VtaU1vbnRobHkpIHtcclxuXHRcdFx0XHQvL2RpdmlkZSBwYXlyYXRlIGJ5IDg2LjY2NjYgPSBudW1iZXIgb2YgaG91cnMgaW4gYSBzZW1pIG1vbnRoXHJcblx0XHRcdFx0bmV3SW5jb21lLnBheXJhdGUgPSBuZXdJbmNvbWUucGF5cmF0ZSAvIDg2LjY2NjY7XHJcblx0XHRcdH1lbHNlIGlmKG5ld0luY29tZS50eXBlLmlkID09IGJpV2Vla2x5KSB7XHJcblx0XHRcdFx0Ly9kaXZpZGUgcGF5cmF0ZSBieSA4MCA9IG51bWJlciBvZiBob3VycyBpbiBhIGJpV2Vla1xyXG5cdFx0XHRcdG5ld0luY29tZS5wYXlyYXRlID0gbmV3SW5jb21lLnBheXJhdGUgLyA4MDtcclxuXHRcdFx0fWVsc2UgaWYobmV3SW5jb21lLnR5cGUuaWQgPT0geWVhcmx5KSB7XHJcblx0XHRcdFx0Ly9kaXZpZGUgcGF5cmF0ZSBieSAyMDgwID0gbnVtYmVyIG9mIGhvdXJzIGluIGEgeWVhclxyXG5cdFx0XHRcdG5ld0luY29tZS5wYXlyYXRlID0gbmV3SW5jb21lLnBheXJhdGUgLyAyMDgwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2V7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2FsbCBmYWlsZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkaHR0cC5wb3N0KGRlcGxveWQgKyAnL2luY29tZS1zb3VyY2VzJywge1xyXG5cdFx0XHRcdGpvYjogbmV3SW5jb21lLmpvYixcclxuXHRcdFx0XHRpbmNvbWVUeXBlOiBuZXdJbmNvbWUudHlwZS5pZCxcclxuXHRcdFx0XHRwYXlyYXRlOiBuZXdJbmNvbWUucGF5cmF0ZSxcclxuXHRcdFx0XHRob3VyczogbmV3SW5jb21lLmhvdXJzLFxyXG5cdFx0XHRcdHRheFBlcmNlbnQ6IG5ld0luY29tZS50YXhQZXJjZW50XHJcblx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24oaW5jb21lKSB7XHJcblx0XHRcdFx0c2VsZi5uZXdJbmNvbWUgPSB7fTtcclxuXHRcdFx0XHRzZWxmLmluY29tZXMucHVzaChzZWxmLm5vcm1hbGl6ZWRJbmNvbWVzKGluY29tZSlbMF0pO1xyXG5cdFx0XHR9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblx0fV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
